apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: "worker"
  name: 99-kvc-kmod
spec:
  config:
     ignition:
       version: 3.1.0
     storage:
       files:
       - contents:
           source: data:text/plain;charset=us-ascii;base64,IyBUaGUgY29uZmlndXJhdGlvbiBmaWxlIGZvciB0aGUgc2ltcGxlLWttb2Qga2VybmVsIG1vZHVsZQojIHNvZnRhcmUgYnVuZGxlIHRoYXQgaXMgdG8gYmUgdXNlZCB3aXRoIHRoZSBrbW9kcy12aWEtY29udGFpbmVycwojIGZyYW1ld29yay4KZXhwb3J0IEdPREVCVUc9eDUwOWlnbm9yZUNOPTAKCnNvdXJjZSAvZXRjL29zLXJlbGVhc2UKCktNT0RfQ09OVEFJTkVSX0JVSUxEX0NPTlRFWFQ9Imh0dHBzOi8vZ2l0aHViLmNvbS9ybXItc2lsaWNvbS9tYWNoaW5lLWNvbmZpZy1rbW9kLmdpdCIKS01PRF9DT05UQUlORVJfQlVJTERfRklMRT0vZXRjL2t2Yy9Eb2NrZXJmaWxlLmNlbnRvcwoKS1ZDX0tWRVI9IjQuMTguMC0xOTMuZWw4Lng4Nl82NCIKUkhFTF9SUE09aHR0cHM6Ly92YXVsdC5jZW50b3Mub3JnLzguMi4yMDA0L0Jhc2VPUy94ODZfNjQvb3MvUGFja2FnZXMva2VybmVsLWRldmVsLTQuMTguMC0xOTMuZWw4Lng4Nl82NC5ycG0KQ0VOVE9TX1ZFUj1kb2NrZXIuaW8vY2VudG9zOjguMi4yMDA0CmlmIFsgJFJIRUxfVkVSU0lPTiA9ICI4LjMiIF0gOyB0aGVuCiAgICBLVkNfS1ZFUj0iNC4xOC4wLTI0MC5lbDgueDg2XzY0IgogICAgQ0VOVE9TX1ZFUj1kb2NrZXIuaW8vY2VudG9zOjguMy4yMDExCiAgICBSSEVMX1JQTT1odHRwOi8vbWlycm9yLmNlbnRvcy5vcmcvY2VudG9zLzgvQmFzZU9TL3g4Nl82NC9vcy9QYWNrYWdlcy9rZXJuZWwtZGV2ZWwtNC4xOC4wLTI0MC5lbDgueDg2XzY0LnJwbQpmaQpLTU9EX1JFUE9TPXF1YXkuaW8vcnlhbl9yYWFzY2gKS1ZDX1NPRlRXQVJFX05BTUU9ZGZsLWttb2QKS01PRFZFUj1lZWE5Y2JjCktNT0RfTkFNRVM9InJlZ21hcC1pbmRpcmVjdC1yZWdpc3RlcgogICAgICAgICAgICByZWdtYXAtc3BpLWF2bW0gXAogICAgICAgICAgICBkZmwtcGNpIFwKICAgICAgICAgICAgZGZsLWFmdSBcCiAgICAgICAgICAgIGRmbC1mbWUgXAogICAgICAgICAgICBkZmwgXAogICAgICAgICAgICBkZmwtc3BpLWFsdGVyYSBcCiAgICAgICAgICAgIGRmbC1mbWUtYnIgXAogICAgICAgICAgICBkZmwtZm1lLW1nciBcCiAgICAgICAgICAgIGRmbC1mbWUtcmVnaW9uIFwKICAgICAgICAgICAgZGZsLWludGVsLXMxMC1pb3BsbCBcCiAgICAgICAgICAgIGZwZ2EtbWdyIFwKICAgICAgICAgICAgZnBnYV9icmlkZ2UgXAogICAgICAgICAgICBpbnRlbC1tMTAtYm1jIFwKICAgICAgICAgICAgaW50ZWwtczEwLXBoeSBcCiAgICAgICAgICAgIGludGVsLW0xMC1ibWMtaHdtb24gXAogICAgICAgICAgICBpbnRlbC1tMTAtYm1jLXNlY3VyZSBcCiAgICAgICAgICAgIG41MDEwLXBoeSBcCiAgICAgICAgICAgIG41MDEwLWhzc2kgXAogICAgICAgICAgICBzMTBoc3NpIFwKICAgICAgICAgICAgc3BpLWFsdGVyYSIKSU1BR0U9JHtLVkNfU09GVFdBUkVfTkFNRX06JHtLTU9EVkVSfS0ke0tWQ19LVkVSfQo=
         mode: 420
         overwrite: true
         path: /etc/kvc/dfl-kmod.conf
       - contents:
           source: data:text/plain;charset=us-ascii;base64,QVJHIENFTlRPU19WRVI9ZG9ja2VyLmlvL2NlbnRvczo4LjIuMjAwNApGUk9NICR7Q0VOVE9TX1ZFUn0KCldPUktESVIgL3Jvb3QKCkFSRyBLTU9EVkVSCkFSRyBLVkVSCkFSRyBSUE1fVVJMPSJodHRwczovL3ZhdWx0LmNlbnRvcy5vcmcvOC4yLjIwMDQvQmFzZU9TL3g4Nl82NC9vcy9QYWNrYWdlcy9rZXJuZWwtZGV2ZWwtNC4xOC4wLTE5My5lbDgueDg2XzY0LnJwbSIKClJVTiBlY2hvICJmYXN0ZXN0bWlycm9yPTEiID4+IC9ldGMvZG5mL2RuZi5jb25mClJVTiBkbmYgaW5zdGFsbCAteSAke1JQTV9VUkx9ClJVTiB5dW0gaW5zdGFsbCAteSBnaXQtY29yZSBnY2MgZWxmdXRpbHMtbGliZWxmLWRldmVsIG1ha2Uga21vZAoKUlVOIGdpdCBjbG9uZSAtLWJyYW5jaCBuNTAxMC9mcGdhLW9mcy1kZXYtNS4xMC1sdHMgaHR0cHM6Ly9naXRodWIuY29tL09QQUUvbGludXgtZGZsLWJhY2twb3J0LmdpdCAmJiBcCiAgICBjZCBsaW51eC1kZmwtYmFja3BvcnQgJiYgXAogICAgZ2l0IGNoZWNrb3V0ICR7S01PRFZFUn0gJiYgXAogICAgZ3JlcCAtbCAtdiAtciBNT0RVTEVfVkVSU0lPTiBkcml2ZXJzLyB8IHhhcmdzIHNlZCAtaSAnL15NT0RVTEVfTElDRU5TRS8gcy8kL1xuTU9EVUxFX1ZFUlNJT04oS01PRFZFUik7LycgJiYgXAogICAgY2QgLQoKUlVOIGVjaG8gImV4cG9ydCBLRVJORUw9JChycG0gLXFhIGtlcm5lbC1kZXZlbCAtLXF1ZXJ5Zm9ybWF0IFwiJXtWRVJTSU9OfS0le1JQTVRBR19SRUxFQVNFfS4le0FSQ0h9XCIpIiA+IC9yb290L2VudiAmJiBcCiAgICBlY2hvICJleHBvcnQgS0VSTkVMRElSPS9saWIvbW9kdWxlcy9cJEtFUk5FTC9idWlsZCIgPj4gL3Jvb3QvZW52ICYmIFwKICAgIGVjaG8gImV4cG9ydCBLTU9EVkVSPSR7S01PRFZFUn0iID4+IC9yb290L2VudgoKUlVOIHNvdXJjZSAvcm9vdC9lbnYgJiYgXAogICAgYmFzaCAtYyAiaWYgWyAhIC1lICRLRVJORUxESVIgXSA7IHRoZW4gbWtkaXIgLXAgL2xpYi9tb2R1bGVzL1wkS0VSTkVMIDsgbG4gLXMgL3Vzci9zcmMva2VybmVscy9cJEtFUk5FTCAvbGliL21vZHVsZXMvXCRLRVJORUwvYnVpbGQ7IGZpIiBcCiAgICBybSAtcmYgL2xpYi9tb2R1bGVzLyR7S1ZFUn0va2VybmVsICYmIFwKICAgIG1ha2UgLUMgbGludXgtZGZsLWJhY2twb3J0ICJFWFRSQV9DRkxBR1M9LURLTU9EVkVSPVxcXCIke0tNT0RWRVJ9XFxcIiIgLWo0ICYmIFwKICAgIG1ha2UgLUMgbGludXgtZGZsLWJhY2twb3J0IGluc3RhbGwgLWo0ICYmIFwKICAgIGRlcG1vZCAtYSAke0tWRVJ9CgoKRlJPTSByZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS91Ymk4L3ViaS1taW5pbWFsClJVTiBtaWNyb2RuZiBpbnN0YWxsIGttb2QKUlVOIG1rZGlyIC1wIC9saWIvbW9kdWxlcy8ke0tWRVJ9CkNPUFkgLS1mcm9tPTAgL2xpYi9tb2R1bGVzLyR7S1ZFUn0gL2xpYi9tb2R1bGVzLyR7S1ZFUn0K
         mode: 420
         overwrite: true
         path: /etc/kvc/Dockerfile.centos
       - contents:
           source: data:text/plain;charset=us-ascii;base64,IyBUaGlzIGNvbmZpZ3VyYXRpb24gZmlsZSBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGggdGhlCiMga21vZHMtdmlhLWNvbnRhaW5lcnMgc29mdHdhcmUgc3RhY2sgdGhhdCBpbnRlbmRzIHRvIGJ1aWxkCiMgYW5kIGRlbGl2ZXIga2VybmVsIG1vZHVsZXMgdmlhIGNvbnRhaW5lciBidWlsZHMvaW1hZ2VzLgoKIyBUaGUgY29udGFpbmVyIHJ1bnRpbWUgdG8gdXNlIGZvciBidWlsZGluZy9leGVjdXRpbmcgY29udGFpbmVycwpLVkNfQ09OVEFJTkVSX1JVTlRJTUU9cG9kbWFuCg==
         mode: 420
         overwrite: true
         path: /etc/kvc/kmods-via-containers.conf
       - contents:
           source: data:text/plain;charset=us-ascii;base64,W1VuaXRdCkRlc2NyaXB0aW9uPUttb2RzIFZpYSBDb250YWluZXJzIC0gJWkKIyBTdGFydCBhZnRlciB0aGUgbmV0d29yayBpcyB1cApXYW50cz1uZXR3b3JrLW9ubGluZS50YXJnZXQKQWZ0ZXI9bmV0d29yay1vbmxpbmUudGFyZ2V0CiMgQWxzbyBhZnRlciBkb2NrZXIuc2VydmljZSAobm8gZWZmZWN0IG9uIHN5c3RlbXMgd2l0aG91dCBkb2NrZXIpCkFmdGVyPWRvY2tlci5zZXJ2aWNlCiMgQmVmb3JlIGt1YmVsZXQuc2VydmljZSAobm8gZWZmZWN0IG9uIHN5c3RlbXMgd2l0aG91dCBrdWJlcm5ldGVzKQpCZWZvcmU9a3ViZWxldC5zZXJ2aWNlCiMgQnV0IGJlZm9yZSB1c2VycyBhcmUgYWxsb3dlZCB0byBsb2dpbgpCZWZvcmU9c3lzdGVtZC11c2VyLXNlc3Npb25zLnNlcnZpY2UKCltTZXJ2aWNlXQpUeXBlPW9uZXNob3QKVGltZW91dFN0YXJ0U2VjPTI1bQpSZW1haW5BZnRlckV4aXQ9dHJ1ZQojIFVzZSBiYXNoIHRvIHdvcmthcm91bmQgaHR0cHM6Ly9naXRodWIuY29tL2NvcmVvcy9ycG0tb3N0cmVlL2lzc3Vlcy8xOTM2CkV4ZWNTdGFydFByZT0vdXNyL2Jpbi9iYXNoIC1jICJrbW9kcy12aWEtY29udGFpbmVycyBidWlsZCAlaSAldiIKRXhlY1N0YXJ0PS91c3IvYmluL2Jhc2ggLWMgImttb2RzLXZpYS1jb250YWluZXJzIGxvYWQgJWkgJXYiCkV4ZWNSZWxvYWQ9L3Vzci9iaW4vYmFzaCAtYyAia21vZHMtdmlhLWNvbnRhaW5lcnMgcmVsb2FkICVpICV2IgpFeGVjU3RvcD0vdXNyL2Jpbi9iYXNoIC1jICJrbW9kcy12aWEtY29udGFpbmVycyB1bmxvYWQgJWkgJXYiClN0YW5kYXJkT3V0cHV0PWpvdXJuYWwrY29uc29sZQoKW0luc3RhbGxdCldhbnRlZEJ5PWRlZmF1bHQudGFyZ2V0Cg==
         mode: 420
         overwrite: true
         path: /etc/systemd/system/kmods-via-containers@.service
       - contents:
           source: data:text/plain;charset=us-ascii;base64,YmxhY2tsaXN0IHJlZ21hcC1zcGktYXZtbSByZWdtYXAtaW5kaXJlY3QtcmVnaXN0ZXI=
         mode: 420
         overwrite: true
         path: /etc/modprobe.d/blacklist-regmap.conf
       - contents:
           source: data:text/plain;charset=us-ascii;base64,YmxhY2tsaXN0IGludGVsLW0xMC1ibWMtcmV0aW1lciBpbnRlbC1tMTAtYm1jLXNlY3VyZSBuNTAxMC1waHkgaW50ZWwtbTEwLWJtYyBpbnRlbC1zMTAtcGh5IGludGVsLW0xMC1ibWMtaHdtb24gaW50ZWwtbTEwLWJtYy1zZWN1cmU=
         mode: 420
         overwrite: true
         path: /etc/modprobe.d/blacklist-intel.conf
       - contents:
           source: data:inode/x-empty;charset=binary;base64,
         mode: 420
         overwrite: true
         path: /etc/modprobe.d/blacklist-spi.conf
       - contents:
           source: data:text/x-shellscript;charset=us-ascii;base64,IyEvYmluL2Jhc2gKCiMgVGhlIE1JVCBMaWNlbnNlCgojIENvcHlyaWdodCAoYykgMjAxOSBEdXN0eSBNYWJlCgojIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKIyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAojIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKIyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCiMgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiMgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KIyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiMgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKIyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKIyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKIyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiMgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKIyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiMgVEhFIFNPRlRXQVJFLgoKc2V0IC1ldQoKIyBIZWxwZXIgZnVuY3Rpb25zIGZvciBydW5uaW5nIGNvbnRhaW5lcnMKIyBVc2Ugc2V0IC14IHRvIHByaW50IG91dCB0aGUgcnVudGltZSBDTEkgdG8gbG9nCiMgUnVuIGluIGEgc3Vic2hlbGwgc28gd2UgZG9uJ3QgYWxzbyBzZWUgYHNldCAreGAKa3ZjX2NfcnVuKCkgICB7IChzZXQgLXg7ICRLVkNfQ09OVEFJTkVSX1JVTlRJTUUgcnVuIC1pIC0tcm0gJEAgKTsgfQprdmNfY19idWlsZCgpIHsgKHNldCAteDsgJEtWQ19DT05UQUlORVJfUlVOVElNRSBidWlsZCAgJEAgKTsgfQprdmNfY19pbWFnZXMoKXsgKHNldCAteDsgJEtWQ19DT05UQUlORVJfUlVOVElNRSBpbWFnZXMgJEAgKTsgfQprdmNfY19ybWkoKSAgIHsgKHNldCAteDsgJEtWQ19DT05UQUlORVJfUlVOVElNRSBybWkgICAgJEAgKTsgfQoKIyBEZWZpbmUgdGhlc2UgZnVuY3Rpb25zIGluIHlvdXIgbGlicmFyeSBmaWxlCmJ1aWxkX2ttb2RzKCkgewogICAgZWNobyAiYnVpbGRfa21vZHMgaXMgdW5pbXBsZW1lbnRlZCBmb3IgJHtLVkNfU09GVFdBUkVfTkFNRX0hIiAyPiYxCiAgICByZXR1cm4gMQp9CmxvYWRfa21vZHMoKSB7CiAgICBlY2hvICJsb2FkX2ttb2RzIGlzIHVuaW1wbGVtZW50ZWQgZm9yICR7S1ZDX1NPRlRXQVJFX05BTUV9ISIgMj4mMQogICAgcmV0dXJuIDEKfQp1bmxvYWRfa21vZHMoKSB7CiAgICBlY2hvICJ1bmxvYWRfa21vZHMgaXMgdW5pbXBsZW1lbnRlZCBmb3IgJHtLVkNfU09GVFdBUkVfTkFNRX0hIiAyPiYxCiAgICByZXR1cm4gMQp9CndyYXBwZXIoKSB7CiAgICBlY2hvICJ3cmFwcGVyIGlzIHVuaW1wbGVtZW50ZWQgZm9yICR7S1ZDX1NPRlRXQVJFX05BTUV9ISIgMj4mMQogICAgcmV0dXJuIDEKfQoKS1ZDX0FDVElPTj0kMTsgc2hpZnQKS1ZDX1NPRlRXQVJFX05BTUU9JDE7IHNoaWZ0CktWQ19LVkVSPSQxOyBzaGlmdAplY2hvICJLVkM6ICR7S1ZDX0FDVElPTn0gJHtLVkNfU09GVFdBUkVfTkFNRX0gZm9yICR7S1ZDX0tWRVJ9IgoKIyBTb3VyY2UgaW4gY29uZmlndXJhdGlvbiBmb3IgdGhlIEtWQyBmcmFtZXdvcmsKc291cmNlICIvZXRjL2t2Yy9rbW9kcy12aWEtY29udGFpbmVycy5jb25mIgojIFNvdXJjZSBpbiB0aGUgbGlicmFyeSB0aGF0IGRlZmluZXMge2J1aWxkLGxvYWQsdW5sb2FkfV9rbW9kcyx3cmFwcGVyCiMgbXVzdCBiZSBpbiBvbmUgb2YgL3Vzci97LGxvY2FsL31saWIva3ZjLyR7S1ZDX1NPRlRXQVJFX05BTUV9LWxpYi5zaApmb3IgaW5zdGFuY2VfbGlicmFyeSBpbiAvdXNyL3tsb2NhbC8sfWxpYi9rdmMvJHtLVkNfU09GVFdBUkVfTkFNRX0tbGliLnNoOyBkbwogICAgaWYgWyAtZiAiJHtpbnN0YW5jZV9saWJyYXJ5fSIgXTsgdGhlbgogICAgICAgIHNvdXJjZSAiJHtpbnN0YW5jZV9saWJyYXJ5fSIKICAgICAgICBmb3VuZD0xCiAgICBmaQpkb25lCmlmIFsgIiR7Zm91bmQtfSIgIT0gMSBdOyB0aGVuCiAgICBlY2hvICJLVkMgcmVxdWlyZXMgYW4gaW5zdGFuY2UgbGlicmFyeSIgXAogICAgICAgICAidG8gZGVmaW5lIHNpZ25pZmljYW50IGZ1bmN0aW9uYWxpdHkiIDI+JjEKICAgIGVjaG8gIk5vIGluc3RhbmNlIGxpYnJhcnkgZm91bmQgaW4gb25lIG9mIHJlcXVpcmVkIGxvY2F0aW9ucyIgXAogICAgICAgICAvdXNyL3tsb2NhbC8sfWxpYi9rdmMvJHtLVkNfU09GVFdBUkVfTkFNRX0tbGliLnNoIDI+JjEKICAgIGV4aXQgMQpmaQoKY2FzZSAiJHtLVkNfQUNUSU9OfSIgaW4KICAgIGJ1aWxkKQogICAgICAgIGJ1aWxkX2ttb2RzCiAgICA7OwogICAgbG9hZCkKICAgICAgICBsb2FkX2ttb2RzCiAgICA7OwogICAgdW5sb2FkKQogICAgICAgIHVubG9hZF9rbW9kcwogICAgOzsKICAgIHJlbG9hZCkKICAgICAgICBidWlsZF9rbW9kcwogICAgICAgIHVubG9hZF9rbW9kcwogICAgICAgIGxvYWRfa21vZHMKICAgIDs7CiAgICB3cmFwcGVyKQogICAgICAgICMgd3JhcHMvcnVucyBleGVjdXRhYmxlcyBmcm9tIHdpdGhpbiB0aGUga2VybmVsIG1vZHVsZSBjb250YWluZXIKICAgICAgICB3cmFwcGVyICRACiAgICA7OwogICAgKikKICAgICAgICBlY2hvICJVbmtub3duIGNvbW1hbmQuIEV4aXRpbmcuIgogICAgICAgIGVjaG8gIlVzYWdlOiIKICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiYnVpbGQgICAgICAgQnVpbGQga2VybmVsIG1vZHVsZShzKSB2aWEgY29udGFpbmVyIgogICAgICAgIGVjaG8gImxvYWQgICAgICAgIExvYWQga2VybmVsIG1vZHVsZShzKSIKICAgICAgICBlY2hvICJ1bmxvYWQgICAgICBVbmxvYWQga2VybmVsIG1vZHVsZShzKSIKICAgICAgICBlY2hvICJyZWxvYWQgICAgICBCdWlsZCBhbmQgcmVsb2FkIGtlcm5lbCBtb2R1bGUocykiCiAgICAgICAgZWNobyAid3JhcHBlciAgICAgUnVuIHVzZXJzcGFjZSB0b29scyBmcm9tIHdpdGhpbiB0aGUgY29udGFpbmVyIgogICAgICAgIGV4aXQgMQplc2FjCg==
         mode: 493
         overwrite: true
         path: /usr/local/bin/kmods-via-containers
       - contents:
           source: data:text/x-shellscript;charset=us-ascii;base64,IyEvYmluL2Jhc2gKCiMgVGhlIE1JVCBMaWNlbnNlCgojIENvcHlyaWdodCAoYykgMjAxOSBEdXN0eSBNYWJlCgojIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKIyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAojIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKIyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCiMgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiMgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KIyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiMgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKIyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKIyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKIyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiMgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKIyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiMgVEhFIFNPRlRXQVJFLgoKc2V0IC1ldQoKIyBUaGlzIGxpYnJhcnkgaXMgdG8gYmUgc291cmNlZCBpbiBhcyBwYXJ0IG9mIHRoZSBrbW9kcy12aWEtY29udGFpbmVycwojIGZyYW1ld29yay4gVGhlcmUgYXJlIHNvbWUgZW52aXJvbm1lbnQgdmFyaWFibGVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcwojIGZpbGUgdGhhdCBhcmUgZXhwZWN0ZWQgdG8gYmUgZGVmaW5lZCBieSB0aGUgZnJhbWV3b3JrIGFscmVhZHk6CiMgLSBLVkNfQ09OVEFJTkVSX1JVTlRJTUUKIyAgIC0gVGhlIGNvbnRhaW5lciBydW50aW1lIHRvIHVzZSAoZXhhbXBsZTogcG9kbWFufGRvY2tlcikKIyAtIEtWQ19TT0ZUV0FSRV9OQU1FCiMgICAtIFRoZSBuYW1lIG9mIHRoaXMgbW9kdWxlIHNvZnR3YXJlIGJ1bmRsZQojIC0gS1ZDX0tWRVIKIyAgIC0gVGhlIGtlcm5lbCB2ZXJzaW9uIHdlIGFyZSB0YXJnZXRpbmcKCiMgVGhlcmUgYXJlIG90aGVyIGVudmlyb25tZW50IHZhcmlhYmxlcyB0aGF0IGNvbWUgZnJvbSB0aGUgY29uZmlnIGZpbGUKIyBkZWxpdmVyZWQgYWxvbmdzaWRlIHRoaXMgbGlicmFyeS4gVGhlIGV4cGVjdGVkIHZhcmlhYmxlcyBhcmU6CiMgLSBLTU9EX0NPTlRBSU5FUl9CVUlMRF9DT05URVhUCiMgICAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gb2YgdGhlIGJ1aWxkIGNvbnRleHQKIyAtIEtNT0RfQ09OVEFJTkVSX0JVSUxEX0ZJTEUKIyAgIC0gVGhlIG5hbWUgb2YgdGhlIGZpbGUgaW4gdGhlIGNvbnRleHQgd2l0aCB0aGUgYnVpbGQgZGVmaW5pdGlvbgojICAgICAoaS5lLiBEb2NrZXJmaWxlKQojIC0gS01PRFZFUgojICAgLSBUaGUgdmVyc2lvbiBvZiB0aGUgc29mdHdhcmUgYnVuZGxlCiMgLSBLTU9EX05BTUVTCiMgICAtIEEgc3BhY2Ugc2VwYXJhdGVkIGxpc3Qga2VybmVsIG1vZHVsZSBuYW1lcyB0aGF0IGFyZSBwYXJ0IG9mIHRoZQojICAgICBtb2R1bGUgc29mdHdhcmUgYnVuZGxlIGFuZCBhcmUgdG8gYmUgY2hlY2tlZC9sb2FkZWQvdW5sb2FkZWQKc291cmNlICIvZXRjL2t2Yy8ke0tWQ19TT0ZUV0FSRV9OQU1FfS5jb25mIgoKIyBUaGUgbmFtZSBvZiB0aGUgY29udGFpbmVyIGltYWdlIHRvIGNvbnNpZGVyLiBJdCB3aWxsIGJlIGEgdW5pcXVlCiMgY29tYmluYXRpb24gb2YgdGhlIG1vZHVsZSBzb2Z0d2FyZSBuYW1lL3ZlcnNpb24gYW5kIHRoZSB0YXJnZXRlZAojIGtlcm5lbCB2ZXJzaW9uLgojIElNQUdFPSIke0tNT0RfUkVQT1N9LyR7S1ZDX1NPRlRXQVJFX05BTUV9OiR7S01PRFZFUn0tJHtLVkNfS1ZFUn0iCgpidWlsZF9rbW9kX2NvbnRhaW5lcigpIHsKICAgIGlmICEgJChsc3BjaSAtZCAxYzJjOiB8IGdyZXAgLXEgU2lsaWNvbSkgOyB0aGVuCiAgICAgICAgZWNobyAiTm8gU2lsaWNvbSBGUEdBIGNhcmQgb24gdGhpcyBub2RlIgogICAgICAgIHJldHVybgogICAgZmkKCiAgICBlY2hvICJCdWlsZGluZyAke0lNQUdFfSBrZXJuZWwgbW9kdWxlIGNvbnRhaW5lci4uLiIKICAgIGt2Y19jX2J1aWxkIC0tdGxzLXZlcmlmeT1mYWxzZSAtdCAke0tNT0RfUkVQT1N9LyR7SU1BR0V9ICAgXAogICAgICAgIC0tZmlsZSAke0tNT0RfQ09OVEFJTkVSX0JVSUxEX0ZJTEV9ICAgICAgICAgIFwKICAgICAgICAtLWxhYmVsPSJuYW1lPSR7S1ZDX1NPRlRXQVJFX05BTUV9IiAgICAgICAgICBcCiAgICAgICAgLS1idWlsZC1hcmcgQ0VOVE9TX1ZFUj0ke0NFTlRPU19WRVJ9ICAgICAgICAgXAogICAgICAgIC0tYnVpbGQtYXJnIEtWRVI9JHtLVkNfS1ZFUn0gICAgICAgICAgICAgICAgIFwKICAgICAgICAtLWJ1aWxkLWFyZyBLTU9EVkVSPSR7S01PRFZFUn0gXAogICAgICAgICR7S01PRF9DT05UQUlORVJfQlVJTERfQ09OVEVYVH0KCiAgICAjIGdldCByaWQgb2YgYW55IGRhbmdsaW5nIGNvbnRhaW5lcnMgaWYgdGhleSBleGlzdAogICAgZWNobyAiQ2hlY2tpbmcgZm9yIG9sZCBrZXJuZWwgbW9kdWxlIGltYWdlcyB0aGF0IG5lZWQgdG8gYmUgcmVjeWNsZWQiCiAgICBybWkxPSQoa3ZjX2NfaW1hZ2VzIC1xIC1mIGxhYmVsPSJuYW1lPSR7S1ZDX1NPRlRXQVJFX05BTUV9IiAtZiBkYW5nbGluZz10cnVlKQogICAgIyBrZWVwIGFyb3VuZCBhbnkgbm9uLWRhbmdsaW5nIGltYWdlcyBmb3Igb25seSB0aGUgbW9zdCByZWNlbnQgMyBrZXJuZWxzCiAgICBybWkyPSQoa3ZjX2NfaW1hZ2VzIC1xIC1mIGxhYmVsPSJuYW1lPSR7S1ZDX1NPRlRXQVJFX05BTUV9IiAtZiBkYW5nbGluZz1mYWxzZSB8IHRhaWwgLW4gKzQpCiAgICBpZiBbICEgLXogIiR7cm1pMX0iIC1vICEgLXogIiR7cm1pMn0iIF07IHRoZW4KICAgICAgICBlY2hvICJDbGVhbmluZyB1cCBvbGQga2VybmVsIG1vZHVsZSBjb250YWluZXIgYnVpbGRzIgogICAgICAgIGt2Y19jX3JtaSAtZiAkcm1pMSAkcm1pMgogICAgZmkKfQoKaXNfa21vZF9sb2FkZWQoKSB7CiAgICBpZiAhICQobHNwY2kgLWQgMWMyYzogfCBncmVwIC1xIFNpbGljb20pIDsgdGhlbgogICAgICAgIGVjaG8gIk5vIFNpbGljb20gRlBHQSBjYXJkIG9uIHRoaXMgbm9kZSIKICAgICAgICByZXR1cm4KICAgIGZpCgogICAgbW9kdWxlPSR7MS8vLS9ffSAjIHJlcGxhY2UgYW55IGRhc2hlcyB3aXRoIHVuZGVyc2NvcmUKICAgIGlmIGxzbW9kIHwgZ3JlcCAiJHttb2R1bGV9IiAmPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCmJ1aWxkX2ttb2RzKCkgewogICAgaWYgISAkKGxzcGNpIC1kIDFjMmM6IHwgZ3JlcCAtcSBTaWxpY29tKSA7IHRoZW4KICAgICAgICBlY2hvICJObyBTaWxpY29tIEZQR0EgY2FyZCBvbiB0aGlzIG5vZGUiCiAgICAgICAgcmV0dXJuCiAgICBmaQoKICAgICMgQ2hlY2sgdG8gc2VlIGlmIGl0J3MgYWxyZWFkeSBwdWxsZWQKICAgIGlmIFsgLXogIiQoa3ZjX2NfaW1hZ2VzICR7S01PRF9SRVBPU30vJElNQUdFIC0tcXVpZXQgMj4vZGV2L251bGwpIiBdOyB0aGVuCiAgICAgICAgZWNobyAiVGhlICR7S01PRF9SRVBPU30vJHtJTUFHRX0ga2VybmVsIG1vZHVsZSBjb250YWluZXIgaGFzIG5vdCBiZWVuIGJ1aWx0L3B1bGxlZCIKICAgICAgICBwb2RtYW4gcHVsbCAke0tNT0RfUkVQT1N9LyR7SU1BR0V9CiAgICBmaQoKICAgICMgU2FuaXR5IGNoZWNrcyBmb3IgZWFjaCBtb2R1bGUgdG8gbG9hZAogICAgZm9yIG1vZHVsZSBpbiAke0tNT0RfTkFNRVN9OyBkbwogICAgICAgIG1vZHVsZT0ke21vZHVsZS8vXy8tfSAjIHJlcGxhY2UgYW55IHVuZGVyc2NvcmVzIHdpdGggZGFzaAogICAgICAgICMgU2FuaXR5IGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYnVpbHQga2VybmVsIG1vZHVsZXMgd2VyZSByZWFsbHkKICAgICAgICAjIGJ1aWx0IGFnYWluc3QgdGhlIGNvcnJlY3QgbW9kdWxlIHNvZnR3YXJlIHZlcnNpb24KICAgICAgICAjIE5vdGUgdGhlIHRyIHRvIGRlbGV0ZSB0aGUgdHJhaWxpbmcgY2FycmlhZ2UgcmV0dXJuCiAgICAgICAgeD0kKGt2Y19jX3J1biAke0tNT0RfUkVQT1N9LyRJTUFHRSBtb2RpbmZvIC1GIHZlcnNpb24gIi9saWIvbW9kdWxlcy8ke0tWQ19LVkVSfS9leHRyYS8ke21vZHVsZX0ua28iIHwgXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHIgLWQgJ1xyJykKICAgICAgICBpZiBbICIke3h9IiAhPSAiJHtLTU9EVkVSfSIgXTsgdGhlbgogICAgICAgICAgICBlY2hvICJNb2R1bGUgdmVyc2lvbiBtaXNtYXRjaCB3aXRoaW4gY29udGFpbmVyLiByZWJ1aWxkaW5nICR7S01PRF9SRVBPU30vJHtJTUFHRX0iCiAgICAgICAgICAgIGVjaG8gIiR7eH0sICR7S01PRFZFUn0iCiAgICAgICAgICAgIGJ1aWxkX2ttb2RfY29udGFpbmVyCiAgICAgICAgZmkKICAgICAgICAjIFNhbml0eSBjaGVjayB0byBtYWtlIHN1cmUgdGhlIGJ1aWx0IGtlcm5lbCBtb2R1bGVzIHdlcmUgcmVhbGx5CiAgICAgICAgIyBidWlsdCBhZ2FpbnN0IHRoZSBkZXNpcmVkIGtlcm5lbCB2ZXJzaW9uCiAgICAgICAgeD0kKGt2Y19jX3J1biAke0tNT0RfUkVQT1N9LyRJTUFHRSBtb2RpbmZvIC1GIHZlcm1hZ2ljICIvbGliL21vZHVsZXMvJHtLVkNfS1ZFUn0vZXh0cmEvJHttb2R1bGV9LmtvIiB8IFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3V0IC1kICcgJyAtZiAxKQogICAgICAgIGlmIFsgIiR7eH0iICE9ICIke0tWQ19LVkVSfSIgXTsgdGhlbgogICAgICAgICAgICBlY2hvICJNb2R1bGUgbm90IGJ1aWx0IGFnYWluc3QgJHtLTU9EVkVSfS4gcmVidWlsZGluZyAke0tNT0RfUkVQT1N9LyR7SU1BR0V9IgogICAgICAgICAgICBlY2hvICIke3h9LCAke0tWQ19LVkVSfSIKICAgICAgICAgICAgYnVpbGRfa21vZF9jb250YWluZXIKICAgICAgICBmaQogICAgZG9uZQp9Cgpsb2FkX2ttb2RzKCkgewogICAgaWYgISAkKGxzcGNpIC1kIDFjMmM6IHwgZ3JlcCAtcSBTaWxpY29tKSA7IHRoZW4KICAgICAgICBlY2hvICJObyBTaWxpY29tIEZQR0EgY2FyZCBvbiB0aGlzIG5vZGUiCiAgICAgICAgcmV0dXJuCiAgICBmaQoKICAgIGVjaG8gIkxvYWRpbmcga2VybmVsIG1vZHVsZXMgdXNpbmcgdGhlIGtlcm5lbCBtb2R1bGUgY29udGFpbmVyLi4uIgogICAgZm9yIG1vZHVsZSBpbiAke0tNT0RfTkFNRVN9OyBkbwogICAgICAgIGlmIGlzX2ttb2RfbG9hZGVkICR7bW9kdWxlfTsgdGhlbgogICAgICAgICAgICBlY2hvICJLZXJuZWwgbW9kdWxlICR7bW9kdWxlfSBhbHJlYWR5IGxvYWRlZCIKICAgICAgICBlbHNlCiAgICAgICAgICAgIG1vZHVsZT0ke21vZHVsZS8vLS9ffSAjIHJlcGxhY2UgYW55IGRhc2hlcyB3aXRoIHVuZGVyc2NvcmUKICAgICAgICAgICAga3ZjX2NfcnVuIC0tcHJpdmlsZWdlZCAke0tNT0RfUkVQT1N9LyRJTUFHRSBtb2Rwcm9iZSAtUyAke0tWQ19LVkVSfSAke21vZHVsZX0KICAgICAgICBmaQogICAgZG9uZQp9Cgp1bmxvYWRfa21vZHMoKSB7CiAgICBpZiAhICQobHNwY2kgLWQgMWMyYzogfCBncmVwIC1xIFNpbGljb20pIDsgdGhlbgogICAgICAgIGVjaG8gIk5vIFNpbGljb20gRlBHQSBjYXJkIG9uIHRoaXMgbm9kZSIKICAgICAgICByZXR1cm4KICAgIGZpCgogICAgZWNobyAiVW5sb2FkaW5nIGtlcm5lbCBtb2R1bGVzLi4uIgogICAgZm9yIG1vZHVsZSBpbiAke0tNT0RfTkFNRVN9OyBkbwogICAgICAgIGlmIGlzX2ttb2RfbG9hZGVkICR7bW9kdWxlfTsgdGhlbgogICAgICAgICAgICBtb2R1bGU9JHttb2R1bGUvLy0vX30gIyByZXBsYWNlIGFueSBkYXNoZXMgd2l0aCB1bmRlcnNjb3JlCiAgICAgICAgICAgIHJtbW9kICIke21vZHVsZX0iCiAgICAgICAgZWxzZQogICAgICAgICAgICBlY2hvICJLZXJuZWwgbW9kdWxlICR7bW9kdWxlfSBhbHJlYWR5IHVubG9hZGVkIgogICAgICAgIGZpCiAgICBkb25lCn0KCndyYXBwZXIoKSB7CiAgICBpZiAhICQobHNwY2kgLWQgMWMyYzogfCBncmVwIC1xIFNpbGljb20pIDsgdGhlbgogICAgICAgIGVjaG8gIk5vIFNpbGljb20gRlBHQSBjYXJkIG9uIHRoaXMgbm9kZSIKICAgICAgICByZXR1cm4KICAgIGZpCgogICAgZWNobyAiUnVubmluZyB1c2Vyc3BhY2Ugd3JhcHBlciB1c2luZyB0aGUga2VybmVsIG1vZHVsZSBjb250YWluZXIuLi4iCiAgICBrdmNfY19ydW4gLS1wcml2aWxlZ2VkICR7S01PRF9SRVBPU30vJElNQUdFICRACn0K
         mode: 420
         overwrite: true
         path: /usr/local/lib/kvc/dfl-kmod-lib.sh
       - contents:
           source: data:text/x-shellscript;charset=us-ascii;base64,IyEvYmluL2Jhc2gKIwojIFRoaXMgaXMgYSB0aGluIHdyYXBwZXIgdGhhdCBtYXBzIHVzZXJzcGFjZSB0b29scyAoZXhlY3V0YWJsZXMpCiMgdG8gYSBjb250YWluZXIgd2hlcmUgdGhleSBjYW4gYmUgcnVuLgoKa21vZHMtdmlhLWNvbnRhaW5lcnMgd3JhcHBlciBkZmwta21vZCAkKHVuYW1lIC1yKSAkKGJhc2VuYW1lICQwKSAkQAo=
         mode: 420
         overwrite: true
         path: /usr/local/lib/kvc/dfl-kmod-wrapper.sh
     systemd:
       units:
       - contents: '[Unit]
     
           Requires=kmods-via-containers@simple-kmod.service
     
           [Service]
     
           Type=oneshot
     
           ExecStart=/usr/bin/true
     
     
           [Install]
     
           WantedBy=multi-user.target
     
           '
         enabled: false
         name: require-kvc-simple-kmod.service
       - contents: '[Unit]
     
           Requires=kmods-via-containers@dfl-kmod.service
     
           [Service]
     
           Type=oneshot
     
           ExecStart=/usr/bin/true
     
     
           [Install]
     
           WantedBy=multi-user.target
     
           '
         enabled: true
         name: require-kvc-dfl-kmod.service
     
